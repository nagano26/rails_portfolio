<nav class="navbar navbar-light navbar-dark bg-dark">
  <a class="navbar-brand">お住まいの登録 </a>
</nav>

<section class="section mb-3">
  <div class="container mt-5">
    <h1 class="title">プロフィール</h1>
    <div class="row">
      <div class="col-12">
        <table class="table table-striped">
          <tr><%= attachment_image_tag @user, :profile_image, fallback: "no-image.png", class: "profile_image mb-4" %></tr>
          <tr><th>・ユーザー名</th></tr>
          <tr><td><%= @user.username %></td></tr>
          <tr><th>・あなたのメールアドレス</th></tr>
          <tr><td><%= @user.email %></td></tr>
          <tr><th>・紹介文</th></tr>
          <tr><td><%= simple_format @user.profile %></td></tr>
        </table>
        <% if @user.id == current_user.id %>
          <%= link_to '編集', edit_user_path(@user), class: "btn btn-outline-primary mb-3"%>
        <% end %>    
      </div>
    </div>
  </div>
</section>

<section>
  <div class="container mb-3">
    <h1 class="title mb-3 bg-success text-white">移住体験</h1>
    <div class="row">
      <div class="count col-12 mb-3">現在の投稿数：<%= @user.normals.count %></div> 
      <% if @user.id == current_user.id %>
        <% if @user.normals.count == 0 %>
          <div class="btn-group col-12">
            <%= link_to "新規登録する", new_normal_path(@normal), class: "btn btn-outline-primary mb-3 mr-3" %>
          </div>
        <% end %>
      <% end %>
      <div class="col-12">
        <% @user.normals.each do |normal| %>
        <table class="table table-striped table-bordered mb-3">
          <tr><th>・移住前の都道府県</th></tr>
          <tr><td><%= normal.before_address %></td></tr>
          <tr><th>・移住後の都道府県</th></tr>
          <tr><td><%= normal.current_address %></td></tr>
          <tr><th>・移住のきっかけ</th></tr>
          <tr><td><%= simple_format normal.trigger %></td></tr>
          <tr><th>・移住する為にどんな準備をしましたか？</th></tr>
          <tr><td><%= simple_format normal.preparation %></td></tr>
        </table>
          <% if @user.id == current_user.id %>
            <div class="btn-group">
              <%= link_to "内容の編集", edit_normal_path(normal), class: "btn btn-outline-primary mb-3 mr-3" %>
              <button type="button" class="btn btn-outline-primary mb-3" data-toggle="modal" data-target="#testModal<%= normal.id %>">削除する</button>
              <!-- ボタン・リンククリック後に表示される画面の内容 -->
              <div class="modal fade" id="testModal<%= normal.id %>" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4>削除確認画面</h4>
                    </div>
                    <div class="modal-body">
                      <label>データを削除しますか？</label>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
                      <%= button_to "削除", normal_path(normal), method: :delete, class: "btn btn-outline-primary" %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</section>

<section>
  <div class="container mb-3">
    <h1 class="title bg-success mb-3 text-white">移住先のお仕事</h1>
    <div class="row">
      <div class="count col-12 mb-3">現在の投稿数：<%= @user.works.count %></div> 
      <% if @user.id == current_user.id %>
        <% if @user.works.count == 0 %>
          <div class="btn-group col-12">
            <%= link_to "新規登録する", new_work_path(@work), class: "btn btn-outline-primary mb-3 mr-3" %>
          </div>
        <% end %>
      <% end %>
      <div class="col-12">
        <% @user.works.each do |work| %>
        <table class="table table-striped table-bordered mb-3">
          <tr><th>・移住前のお仕事</th></tr>
          <tr><td><%= work.before_work %></td></tr>
          <tr><th>・移住後のお仕事</th></tr>
          <tr><td><%= work. current_work %></td></tr>
          <tr><th>・移住先の主なお仕事</th></tr>
          <tr><td><%= simple_format work.others_work %></td></tr>
          <tr><th>・仕事について</th></tr>
          <tr><td><%= simple_format work.message_work %></td></tr>
        </table>
          <% if @user.id == current_user.id %>
            <div class="btn-group">
              <%= link_to "内容の編集", edit_work_path(work), class: "btn btn-outline-primary mb-3 mr-3" %>
              <button type="button" class="btn btn-outline-primary mb-3" data-toggle="modal" data-target="#testModal<%= work.id %>">削除する</button>
              <!-- ボタン・リンククリック後に表示される画面の内容 -->
              <div class="modal fade" id="testModal<%= work.id %>" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4>削除確認画面</h4>
                    </div>
                    <div class="modal-body">
                      <label>データを削除しますか？</label>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
                      <%= button_to "削除", work_path(work), method: :delete, class: "btn btn-outline-primary" %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</section>

<section>
  <div class="container">
    <h1 class="title bg-success mb-3 text-white">移住先の生活</h1>
    <div class="row">
      <div class="count col-12 mb-3">現在の投稿数：<%= @user.lifestyles.count %></div> 
      <% if @user.id == current_user.id %>
        <% if @user.lifestyles.count == 0 %>
          <div class="btn-group col-12">
            <%= link_to "新規登録する", new_lifestyle_path(@lifestyle), class: "btn btn-outline-primary mb-3 mr-3" %>
          </div>
        <% end %>
      <% end %>
      <div class="col-12">
        <% @user.lifestyles.each do |lifestyle| %>
        <table class="table table-striped table-bordered mb-3">
          <tr><th>・移住先の一ヶ月の生活費</th></tr>
          <tr><td><%= lifestyle.price_life %></td></tr>
          <tr><th>・どうやって住まいを探したか</th></tr>
          <tr><td><%= simple_format lifestyle.house_life %></td></tr>
          <tr><th>・近所付き合いについて</th></tr>
          <tr><td><%= simple_format lifestyle.dating_life %></td></tr>
          <tr><th>・利用した国や自治体の制度について</th></tr>
          <tr><td><%= simple_format lifestyle.system_life %></td></tr>
        </table>
          <% if @user.id == current_user.id %>
            <div class="btn-group">
              <%= link_to "内容の編集", edit_lifestyle_path(lifestyle), class: "btn btn-outline-primary mb-3 mr-3" %>
              <button type="button" class="btn btn-outline-primary mb-3" data-toggle="modal" data-target="#testModal<%= lifestyle.id %>">削除する</button>
              <!-- ボタン・リンククリック後に表示される画面の内容 -->
              <div class="modal fade" id="testModal<%= lifestyle.id %>" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4>削除確認画面</h4>
                    </div>
                    <div class="modal-body">
                      <label>データを削除しますか？</label>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
                      <%= button_to "削除", lifestyle_path(lifestyle), method: :delete, class: "btn btn-outline-primary" %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</section>

<section class="section bg-light">
  <div class="container mt-4">
    <h2 class="title">あなたのお部屋投稿一覧</h2>
      <div class="count mb-3">現在の投稿数：<%= @user.rooms.count %></div>
      <% if @user.id == current_user.id %>
        <% if @user.rooms.count == 0 %>
          <div class="btn-group col-12">
            <%= link_to "新規登録する", new_room_path(@room), class: "btn btn-outline-primary mb-3 mr-3" %>
          </div>
        <% end %>
      <% end %>
      <div class="row gx-4 gx-lg-5 row-cols-2 mb-5 row-cols-md-3 row-cols-xl-4 justify-content-center">
        <% @user.rooms.each do |room| %>
          <div class="col mb-5">
            <div class="card h-100 mt-5">
              <figure class="image">
                <%= link_to room_path(room) do %>
                  <%= attachment_image_tag room, :room_image, fallback: "no-image.png" %>
                <% end %>
              </figure>
              <div class="media">
                <div class="media-content">
                  <div class="mt-3">
                    <%= link_to room_path(room), class: "panel-block ml-2" do %>
                      <span class="panel-icon">
                        <i class="fas fa-book" aria-hidden="true"></i>
                      </span>
                      この投稿を見る
                    <% end %>
                  </div>
                  <% if @user.id == current_user.id %>
                    <div class="mt-3">
                      <%= link_to edit_room_path(room), class: "panel-block ml-2" do %>
                        <span class="panel-icon">
                          <i class="fas fa-edit"></i>
                        </span>
                        この投稿を編集する
                      <% end %>
                    </div>
                    <div class="mt-3">
                      <button type="button" class="btn btn-outline-primary mb-3" data-toggle="modal" data-target="#testModal<%= room.id %>">削除する</button>
                      <!-- ボタン・リンククリック後に表示される画面の内容 -->
                      <div class="modal fade" id="testModal<%= room.id %>" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h4>削除確認画面</h4>
                            </div>
                            <div class="modal-body">
                              <label>データを削除しますか？</label>
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
                              <%= button_to "削除", room_path(room), method: :delete, class: "btn btn-outline-primary" %>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
  </div>
</section>

